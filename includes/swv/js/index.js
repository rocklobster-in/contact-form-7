(()=>{"use strict";const t=t=>{const e=t.trim().match(/^([a-z][0-9a-z:_-]*)((?:\[\s*(?:[a-z][0-9a-z:_-]*|[0-9]*)\s*\])*)$/i);if(!e)return[];const o=e[1],i=e[2].match(/\[.*?\]/gi);return i?[o,...i.map((t=>t.slice(1,-1).trim()))]:[o]};function e(){this.trunk={},this.largestIndex=0}function o(t,e={}){const{error:o}=t;Error.call(this,o,e),this.rule=t}function i(){}function r(){i.call(this),this.rules=[]}function n(t){r.call(this),this.field=t.field,this.error=t.error}function s(t){r.call(this),this.field=t.field,this.error=t.error}e.prototype={filter(t){if(!(t instanceof Function))throw new TypeError("'callback' is not a function");const o=new e;for(let[i,r]of Object.entries(this.trunk))r instanceof e?(r=r.filter(t),r.size&&o.set(i,r)):t(r)&&o.set(i,r);return o},getAll(o,i="string"){const r=t(o);if(!r.length)return{};let n,s=this;for("string"===i?s=s.filter((t=>"string"==typeof t)):"file"===i&&(s=s.filter((t=>t instanceof File)));n=r.shift();){if(/^[0-9]*$/.test(n)||void 0===s.trunk[n])return{};s=s.trunk[n]}return s instanceof e?s.valueOf():{0:s}},getAllFiles(t){return this.getAll(t,"file")},set(t,o){return(o=e.excludeBlank(o))?(""===t?t=this.largestIndex++:/^[0-9]+$/.test(t)&&(t=parseInt(t),this.largestIndex<=t&&(this.largestIndex=t+1)),this.trunk[t.toString()]=o,this):this},valueOf(){const t={};for(let[e,o]of Object.entries(this.trunk))t[e]=o.valueOf();return t},get size(){return Object.keys(this.trunk).length}},e.excludeBlank=t=>{if(t instanceof e)return t;if(t instanceof Blob){if(t.size)return t}else if(t=t.toString().trim())return t},e.from=o=>{if(!(o instanceof FormData))throw new TypeError("'formData' is not a FormData object");const i=new e;for(let[r,n]of o){const o=t(r);if(!o.length)continue;if(n=e.excludeBlank(n),!n)continue;const s=o.pop();o.reduce(((t,o)=>{if(t.trunk[o]instanceof e)return t.trunk[o];const i=new e;return t.set(o,i),i}),i).set(s,n)}return i},o.prototype={get name(){return"InvalidityException"},get message(){var t,e;return null!==(t=null!==(e=this.cause?.error)&&void 0!==e?e:this.rule.error)&&void 0!==t?t:""},get field(){var t,e;return null!==(t=null!==(e=this.cause?.field)&&void 0!==e?e:this.rule.field)&&void 0!==t?t:""}},Object.setPrototypeOf(o.prototype,Error.prototype),i.prototype={matches:t=>!0,validate:(t,e)=>!0,toJSON(){const t=[];return Object.entries(this).forEach((([e,o])=>{t.push([e,o])})),this.constructor.RULE_NAME&&t.unshift(["rule",this.constructor.RULE_NAME]),Object.fromEntries(t)}},r.prototype={addRule(t){if(!(t instanceof i))throw new TypeError("'rule' is not a rule object");return this.rules.push(t),!0},toJSON(){const t=[];return Object.entries(this).forEach((([e,o])=>{"rules"===e?t.push([e,o.map((t=>t.toJSON()))]):t.push([e,o])})),this.constructor.RULE_NAME&&t.unshift(["rule",this.constructor.RULE_NAME]),Object.fromEntries(t)}},Object.setPrototypeOf(r.prototype,i.prototype),n.RULE_NAME="all",Object.setPrototypeOf(n.prototype,r.prototype),n.prototype.validate=function(t,e){var i;const r=(null!==(i=this.rules)&&void 0!==i?i:[]).filter((t=>t.matches(e)));if(!r.length)return!0;for(const i of r)try{i.validate(t,e)}catch(t){throw t instanceof o?new o(this,{cause:t}):t}return!0},s.RULE_NAME="any",Object.setPrototypeOf(s.prototype,r.prototype),s.prototype.validate=function(t,e){var i;const r=(null!==(i=this.rules)&&void 0!==i?i:[]).filter((t=>t.matches(e)));if(!r.length)return!0;let n=null;for(const i of r){try{n=!0,i.validate(t,e)}catch(t){if(!(t instanceof o))throw t;n=!1}if(n)break}if(!1===n)throw new o(this);return!0};const a=t=>{const e=[];if(Object===t.constructor)for(const o of Object.values(t))e.push(...a(o));else if(t instanceof Map)for(const[o,i]of t)e.push(...a(i));else if(Array.isArray(t))for(const o of t)e.push(...a(o));else e.push(t);return e};function l(t){i.call(this),this.field=t.field,this.error=t.error}function p(t){i.call(this),this.field=t.field,this.error=t.error,this.accept=t.accept}function c(t){i.call(this),this.field=t.field,this.error=t.error}function f(t){i.call(this),this.field=t.field,this.error=t.error,this.accept=t.accept}function h(t){i.call(this),this.field=t.field,this.error=t.error,this.accept=t.accept}function d(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function u(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function m(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function g(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function y(t){i.call(this),this.field=t.field,this.error=t.error}function v(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function w(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function x(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function b(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function E(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function O(t){i.call(this),this.field=t.field,this.error=t.error,this.threshold=t.threshold}function N(t){i.call(this),this.field=t.field,this.error=t.error}function A(t){i.call(this),this.field=t.field,this.error=t.error}function j(t){i.call(this),this.field=t.field,this.error=t.error,this.base=t.base,this.interval=t.interval}function L(t){i.call(this),this.field=t.field,this.error=t.error}function M(t){i.call(this),this.field=t.field,this.error=t.error}function R(t){i.call(this),this.field=t.field,this.error=t.error}l.RULE_NAME="date",Object.setPrototypeOf(l.prototype,i.prototype),l.isDate=t=>{if(!/^[0-9]{4,}-[0-9]{2}-[0-9]{2}$/.test(t))return!1;const e=new Date(t);return!Number.isNaN(e.valueOf())},l.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!l.isDate(t))throw new o(this,{cause:t});return!0},p.RULE_NAME="dayofweek",Object.setPrototypeOf(p.prototype,i.prototype),p.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i){const e=0===(r=new Date(t).getDay())?7:r;if(!this.accept?.map(String).includes(String(e)))throw new o(this,{cause:t})}var r;return!0},c.RULE_NAME="email",Object.setPrototypeOf(c.prototype,i.prototype),c.isEmail=t=>{if(t.length<6)return!1;if(-1===t.indexOf("@",1))return!1;if(t.indexOf("@")!==t.lastIndexOf("@"))return!1;const[e,o]=t.split("@",2);if(!/^[a-zA-Z0-9!#$%&\'*+\/=?^_`{|}~\.-]+$/.test(e))return!1;if(/\.{2,}/.test(o))return!1;if(/(?:^[ \t\n\r\0\x0B.]|[ \t\n\r\0\x0B.]$)/.test(o))return!1;const i=o.split(".");if(i.length<2)return!1;for(const t of i){if(/(?:^[ \t\n\r\0\x0B-]|[ \t\n\r\0\x0B-]$)/.test(t))return!1;if(!/^[a-z0-9-]+$/i.test(t))return!1}return!0},c.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!c.isEmail(t))throw new o(this,{cause:t});return!0},f.RULE_NAME="enum",Object.setPrototypeOf(f.prototype,i.prototype),f.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!this.accept?.map(String).includes(t))throw new o(this,{cause:t});return!0},h.RULE_NAME="file",Object.setPrototypeOf(h.prototype,i.prototype),h.mimeTypes=new Map([["application/java",["class"]],["application/javascript",["js"]],["application/msword",["doc"]],["application/octet-stream",["psd","xcf"]],["application/onenote",["onetoc","onetoc2","onetmp","onepkg"]],["application/oxps",["oxps"]],["application/pdf",["pdf"]],["application/rar",["rar"]],["application/rtf",["rtf"]],["application/ttaf+xml",["dfxp"]],["application/vnd.apple.keynote",["key"]],["application/vnd.apple.numbers",["numbers"]],["application/vnd.apple.pages",["pages"]],["application/vnd.ms-access",["mdb"]],["application/vnd.ms-excel",["xla","xls","xlt","xlw"]],["application/vnd.ms-excel.addin.macroEnabled.12",["xlam"]],["application/vnd.ms-excel.sheet.binary.macroEnabled.12",["xlsb"]],["application/vnd.ms-excel.sheet.macroEnabled.12",["xlsm"]],["application/vnd.ms-excel.template.macroEnabled.12",["xltm"]],["application/vnd.ms-powerpoint",["pot","pps","ppt"]],["application/vnd.ms-powerpoint.addin.macroEnabled.12",["ppam"]],["application/vnd.ms-powerpoint.presentation.macroEnabled.12",["pptm"]],["application/vnd.ms-powerpoint.slide.macroEnabled.12",["sldm"]],["application/vnd.ms-powerpoint.slideshow.macroEnabled.12",["ppsm"]],["application/vnd.ms-powerpoint.template.macroEnabled.12",["potm"]],["application/vnd.ms-project",["mpp"]],["application/vnd.ms-word.document.macroEnabled.12",["docm"]],["application/vnd.ms-word.template.macroEnabled.12",["dotm"]],["application/vnd.ms-write",["wri"]],["application/vnd.ms-xpsdocument",["xps"]],["application/vnd.oasis.opendocument.chart",["odc"]],["application/vnd.oasis.opendocument.database",["odb"]],["application/vnd.oasis.opendocument.formula",["odf"]],["application/vnd.oasis.opendocument.graphics",["odg"]],["application/vnd.oasis.opendocument.presentation",["odp"]],["application/vnd.oasis.opendocument.spreadsheet",["ods"]],["application/vnd.oasis.opendocument.text",["odt"]],["application/vnd.openxmlformats-officedocument.presentationml.presentation",["pptx"]],["application/vnd.openxmlformats-officedocument.presentationml.slide",["sldx"]],["application/vnd.openxmlformats-officedocument.presentationml.slideshow",["ppsx"]],["application/vnd.openxmlformats-officedocument.presentationml.template",["potx"]],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",["xlsx"]],["application/vnd.openxmlformats-officedocument.spreadsheetml.template",["xltx"]],["application/vnd.openxmlformats-officedocument.wordprocessingml.document",["docx"]],["application/vnd.openxmlformats-officedocument.wordprocessingml.template",["dotx"]],["application/wordperfect",["wp","wpd"]],["application/x-7z-compressed",["7z"]],["application/x-gzip",["gz","gzip"]],["application/x-msdownload",["exe"]],["application/x-shockwave-flash",["swf"]],["application/x-tar",["tar"]],["application/zip",["zip"]],["audio/3gpp",["3gp","3gpp"]],["audio/3gpp2",["3g2","3gp2"]],["audio/aac",["aac"]],["audio/flac",["flac"]],["audio/midi",["mid","midi"]],["audio/mpeg",["mp3","m4a","m4b"]],["audio/ogg",["ogg","oga"]],["audio/wav",["wav","x-wav"]],["audio/x-matroska",["mka"]],["audio/x-ms-wax",["wax"]],["audio/x-ms-wma",["wma"]],["audio/x-realaudio",["ra","ram"]],["image/avif",["avif"]],["image/bmp",["bmp"]],["image/gif",["gif"]],["image/heic",["heic"]],["image/heic-sequence",["heic","heics"]],["image/heif",["heic","heif"]],["image/heif-sequence",["heic","heifs"]],["image/jpeg",["jpg","jpeg","jpe"]],["image/png",["png"]],["image/tiff",["tiff","tif"]],["image/webp",["webp"]],["image/x-icon",["ico"]],["text/calendar",["ics"]],["text/css",["css"]],["text/csv",["csv"]],["text/html",["htm","html"]],["text/plain",["txt","asc","c","cc","h","srt"]],["text/richtext",["rtx"]],["text/tab-separated-values",["tsv"]],["text/vtt",["vtt"]],["video/3gpp",["3gp","3gpp"]],["video/3gpp2",["3g2","3gp2"]],["video/avi",["avi"]],["video/divx",["divx"]],["video/mp4",["mp4","m4v"]],["video/mpeg",["mpeg","mpg","mpe"]],["video/ogg",["ogv"]],["video/quicktime",["mov","qt"]],["video/webm",["webm"]],["video/x-flv",["flv"]],["video/x-matroska",["mkv"]],["video/x-ms-asf",["asf","asx"]],["video/x-ms-wm",["wm"]],["video/x-ms-wmv",["wmv"]],["video/x-ms-wmx",["wmx"]]]),h.convertMimeToExt=t=>{const e=[],o=t.match(/^(?<toplevel>[a-z]+)\/(?<sub>[*]|[a-z0-9.+-]+)$/i);if(o){const t=o.groups.toplevel.toLowerCase(),i=o.groups.sub.toLowerCase();for(const[r,n]of h.mimeTypes)(r===o[0]||"*"===i&&r.startsWith(t+"/"))&&e.push(...n)}return e},h.prototype.validate=function(t,e){const i=a(t.getAllFiles(this.field));if(!i.length)return!0;const r=t=>t instanceof File&&this.accept?.some((e=>/^\.[a-z0-9]+$/i.test(e)?t.name.toLowerCase().endsWith(e.toLowerCase()):h.convertMimeToExt(e).some((e=>(e="."+e.trim(),t.name.toLowerCase().endsWith(e.toLowerCase()))))));for(const t of i)if(!r(t))throw new o(this,{cause:t});return!0},d.RULE_NAME="maxdate",Object.setPrototypeOf(d.prototype,i.prototype),d.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length||!l.isDate(this.threshold))return!0;for(const t of i)if(l.isDate(t)&&this.threshold<t)throw new o(this,{cause:t});return!0},u.RULE_NAME="maxfilesize",Object.setPrototypeOf(u.prototype,i.prototype),u.prototype.validate=function(t,e){const i=a(t.getAllFiles(this.field));if(!i.length)return!0;const r=parseInt(this.threshold),n=i.reduce(((t,e)=>(e instanceof File&&(t+=e.size),t)),0);if(!Number.isNaN(r)&&r<n)throw new o(this,{cause:n});return!0},m.RULE_NAME="maxitems",Object.setPrototypeOf(m.prototype,i.prototype),m.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseInt(this.threshold);if(!Number.isNaN(r)&&r<i.length)throw new o(this,{cause:i.length});return!0},g.RULE_NAME="maxlength",Object.setPrototypeOf(g.prototype,i.prototype),g.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseInt(this.threshold),n=i.reduce(((t,e)=>t+e.length),0);if(!Number.isNaN(r)&&r<n)throw new o(this,{cause:n});return!0},y.RULE_NAME="number",Object.setPrototypeOf(y.prototype,i.prototype),y.isNumber=t=>!!/^[-]?[0-9]+(?:[eE][+-]?[0-9]+)?$/.test(t)||!!/^[-]?(?:[0-9]+)?[.][0-9]+(?:[eE][+-]?[0-9]+)?$/.test(t),y.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!y.isNumber(t))throw new o(this,{cause:t});return!0},v.RULE_NAME="maxnumber",Object.setPrototypeOf(v.prototype,i.prototype),v.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseFloat(this.threshold);if(Number.isNaN(r))return!0;for(const t of i)if(y.isNumber(t)&&r<parseFloat(t))throw new o(this,{cause:t});return!0},w.RULE_NAME="mindate",Object.setPrototypeOf(w.prototype,i.prototype),w.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length||!l.isDate(this.threshold))return!0;for(const t of i)if(l.isDate(t)&&t<this.threshold)throw new o(this,{cause:t});return!0},x.RULE_NAME="minfilesize",Object.setPrototypeOf(x.prototype,i.prototype),x.prototype.validate=function(t,e){const i=a(t.getAllFiles(this.field));if(!i.length)return!0;const r=parseInt(this.threshold),n=i.reduce(((t,e)=>(e instanceof File&&(t+=e.size),t)),0);if(!Number.isNaN(r)&&n<r)throw new o(this,{cause:n});return!0},b.RULE_NAME="minitems",Object.setPrototypeOf(b.prototype,i.prototype),b.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseInt(this.threshold);if(!Number.isNaN(r)&&i.length<r)throw new o(this,{cause:i.length});return!0},E.RULE_NAME="minlength",Object.setPrototypeOf(E.prototype,i.prototype),E.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseInt(this.threshold),n=i.reduce(((t,e)=>t+e.length),0);if(!Number.isNaN(r)&&n<r)throw new o(this,{cause:n});return!0},O.RULE_NAME="minnumber",Object.setPrototypeOf(O.prototype,i.prototype),O.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseFloat(this.threshold);if(Number.isNaN(r))return!0;for(const t of i)if(y.isNumber(t)&&parseFloat(t)<r)throw new o(this,{cause:t});return!0},N.RULE_NAME="required",Object.setPrototypeOf(N.prototype,i.prototype),N.prototype.validate=function(t,e){if(!a(t.getAll(this.field)).length)throw new o(this);return!0},A.RULE_NAME="requiredfile",Object.setPrototypeOf(A.prototype,i.prototype),A.prototype.validate=function(t,e){if(!a(t.getAllFiles(this.field)).length)throw new o(this);return!0},j.RULE_NAME="stepnumber",Object.setPrototypeOf(j.prototype,i.prototype),j.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;const r=parseFloat(this.base),n=parseFloat(this.interval);if(!(0<n))return!0;const s=t=>{const e=(parseFloat(t)-r)%n;return"0.000000"===Math.abs(e).toFixed(6)||"0.000000"===Math.abs(e-n).toFixed(6)};for(const t of i)if(!s(t))throw new o(this,{cause:t});return!0},L.RULE_NAME="tel",Object.setPrototypeOf(L.prototype,i.prototype),L.isTel=t=>(((t=(t=t.replace(/[#*].*$/,"")).replaceAll(/[()/.*#\s-]+/g,"")).startsWith("+")||t.startsWith("00"))&&(t=`+${t.replace(/^[+0]+/,"")}`),!!/^[+]?[0-9]+$/.test(t)&&5<t.length&&t.length<16),L.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!L.isTel(t))throw new o(this,{cause:t});return!0},M.RULE_NAME="time",Object.setPrototypeOf(M.prototype,i.prototype),M.isTime=t=>{const e=t.match(/^([0-9]{2})\:([0-9]{2})(?:\:([0-9]{2}))?$/);if(!e)return!1;const o=parseInt(e[1]),i=parseInt(e[2]),r=e[3]?parseInt(e[3]):0;return 0<=o&&o<=23&&0<=i&&i<=59&&0<=r&&r<=59},M.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!M.isTime(t))throw new o(this,{cause:t});return!0},R.RULE_NAME="url",Object.setPrototypeOf(R.prototype,i.prototype),R.isUrl=t=>{const e=["http","https"];try{const o=new URL(t).protocol.replace(/:$/,"");return e.includes(o)}catch{return!1}},R.prototype.validate=function(t,e){const i=a(t.getAll(this.field));if(!i.length)return!0;for(const t of i)if(!R.isUrl(t))throw new o(this,{cause:t});return!0};const U=new Map([["all",n],["any",s],["date",l],["dayofweek",p],["email",c],["enum",f],["file",h],["maxdate",d],["maxfilesize",u],["maxitems",m],["maxlength",g],["maxnumber",v],["mindate",w],["minfilesize",x],["minitems",b],["minlength",E],["minnumber",O],["number",y],["required",N],["requiredfile",A],["stepnumber",j],["tel",L],["time",M],["url",R]]);function _(t){r.call(this),t.rules.forEach((t=>{const e=_.createRule(t);e&&this.addRule(e)}))}_.prototype={*validate(t,e){const i=this.rules.filter((t=>t.matches(e)));for(const r of i)try{r.validate(t,e)}catch(t){if(!(t instanceof o))throw t;yield{field:t.field,message:t.message}}}},Object.setPrototypeOf(_.prototype,r.prototype),_.createRule=t=>{if(U.has(t.rule)){const e=new(U.get(t.rule))(t);return e instanceof r&&t.rules.forEach((t=>{const o=_.createRule(t);o&&e.addRule(o)})),e}},window.swv={Schema:_,rulesDictionary:U}})();